
/* Abrir menú Responsive */
document.addEventListener('DOMContentLoaded', function () {
	document.querySelector('.abrir_menu_cell').addEventListener('click', function (event) {
		event.preventDefault()
		document.querySelector('.menu_responsive_cont').classList.add('activo')
	})
	document.querySelector('.cerrar_menu_cell').addEventListener('click', function (event) {
		event.preventDefault()
		document.querySelector('.menu_responsive_cont').classList.remove('activo')
	})

	// Disparador del buscador
	let buscador_abierto = 0
	document.querySelector('.search_trigger').addEventListener('click', function( event ){
		event.preventDefault()
		if(buscador_abierto == 0){
			document.querySelector('.buscador__sombra').classList.add("mostrar")
			buscador_abierto = 1
		}else{
			document.querySelector('.buscador__sombra').classList.remove("mostrar")
			buscador_abierto = 0
		}
	})


	// Programación de los timelines
	if(document.querySelector('.jwm_timeline')){
		document.querySelectorAll('.jwm_timeline').forEach(function(cTimeline){
			let currentSlide = 0
			let ultimoSlide = cTimeline.querySelectorAll('.jwm_timeline__indv').length - 1

			cTimeline.querySelectorAll('.jwm_timeline__nav--anios a').forEach(function(cadaAnio, indiceAnio){
				cadaAnio.addEventListener('click', function( event ){
					event.preventDefault()
					
					// -> Cambiamos el año a mostrar en el timeline
					cTimeline.querySelectorAll('.jwm_timeline__indv').forEach(function(a){
						a.classList.remove('activo')
					})
					cTimeline.querySelectorAll('.jwm_timeline__indv')[indiceAnio].classList.add('activo')

					// -> Cambiamos el indicador de año
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li').forEach(function(cIenlace, iEnlace){
						cIenlace.classList.remove('seleccionado')
					})
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li')[indiceAnio].classList.add('seleccionado')

					// -> Verificamos si debemos inactivar las flechas o no
					cTimeline.querySelectorAll('.jwm_timeline__nav--btn a').forEach(function(cadaBtn){
						cadaBtn.classList.remove('inactivo')
					})
					if(indiceAnio == 0){ /* Inactivo la primera flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .prev').classList.add('inactivo')
					}
					if(indiceAnio >= ultimoSlide){ /* Inactivo la última flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .next').classList.add('inactivo')
					}
					
					currentSlide = indiceAnio
				})
			})

			// Hacemos el botón de la izquierda:
			cTimeline.querySelector('.jwm_timeline__nav--btn .prev').addEventListener('click', function( event ){
				event.preventDefault()
				if(currentSlide > 0){
					let nuevoSlide = currentSlide - 1
					// -> Cambiamos el año a mostrar en el timeline
					cTimeline.querySelectorAll('.jwm_timeline__indv').forEach(function(a){
						a.classList.remove('activo')
					})
					cTimeline.querySelectorAll('.jwm_timeline__indv')[nuevoSlide].classList.add('activo')
					// -> Cambiamos el indicador de año
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li').forEach(function(cIenlace, iEnlace){
						cIenlace.classList.remove('seleccionado')
					})
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li')[nuevoSlide].classList.add('seleccionado')
					// -> Verificamos si debemos inactivar las flechas o no
					cTimeline.querySelectorAll('.jwm_timeline__nav--btn a').forEach(function(cadaBtn){
						cadaBtn.classList.remove('inactivo')
					})
					if(nuevoSlide == 0){ /* Inactivo la primera flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .prev').classList.add('inactivo')
					}
					if(nuevoSlide >= ultimoSlide){ /* Inactivo la última flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .next').classList.add('inactivo')
					}

					currentSlide = nuevoSlide
				}
			})

			// Hacemos el botón de la derecha
			cTimeline.querySelector('.jwm_timeline__nav--btn .next').addEventListener('click', function( event ){
				event.preventDefault()
				if(currentSlide < ultimoSlide){
					let nuevoSlide = currentSlide + 1
					// -> Cambiamos el año a mostrar en el timeline
					cTimeline.querySelectorAll('.jwm_timeline__indv').forEach(function(a){
						a.classList.remove('activo')
					})
					cTimeline.querySelectorAll('.jwm_timeline__indv')[nuevoSlide].classList.add('activo')
					// -> Cambiamos el indicador de año
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li').forEach(function(cIenlace, iEnlace){
						cIenlace.classList.remove('seleccionado')
					})
					cTimeline.querySelectorAll('.jwm_timeline__nav--anios li')[nuevoSlide].classList.add('seleccionado')
					// -> Verificamos si debemos inactivar las flechas o no
					cTimeline.querySelectorAll('.jwm_timeline__nav--btn a').forEach(function(cadaBtn){
						cadaBtn.classList.remove('inactivo')
					})
					if(nuevoSlide == 0){ /* Inactivo la primera flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .prev').classList.add('inactivo')
					}
					if(nuevoSlide >= ultimoSlide){ /* Inactivo la última flecha */
						cTimeline.querySelector('.jwm_timeline__nav--btn .next').classList.add('inactivo')
					}

					currentSlide = nuevoSlide
				}
			})
		})
	}


})

jQuery(document).ready(function ($) {

	$('.aliados_slider').slick({
		slidesToShow: 5,
		slidesToScroll: 1,
		infinite: true,
		dots: true,
		dotsClass: 'slider_dots1',
		speed: 300,
		autoplay: true,
		autoplaySpeed: 5000,
		prevArrow: '<button type="button" class="slick-prev slider_btn2"><i class="fal fa-arrow-left"></i></button>',
		nextArrow: '<button type="button" class="slick-next slider_btn2"><i class="fal fa-arrow-right"></i></button>',
		responsive: [
			{
				breakpoint: 992,
				settings: {
					slidesToShow: 4,
				}
			},
			{
				breakpoint: 768,
				settings: {
					slidesToShow: 3,
				}
			},
			{
				breakpoint: 500,
				settings: {
					slidesToShow: 2,
				}
			},
		]
	});

	$('.slider_home').slick({
		slidesToShow: 1,
		slidesToScroll: 1,
		infinite: true,
		dots: true,
		dotsClass: 'slider_dots1',
		speed: 300,
		autoplay: true,
		autoplaySpeed: 5000,
		prevArrow: '<button type="button" class="slick-prev slider_btn1"><i class="fal fa-arrow-left"></i></button>',
		nextArrow: '<button type="button" class="slick-next slider_btn1"><i class="fal fa-arrow-right"></i></button>',

	});



})

document.addEventListener('DOMContentLoaded', function () {
	/* Botones galerías - Instalaciones home */
	if (document.querySelector('.btns_instalaciones_gal')) {

		const instalaciones = document.querySelector('.btns_instalaciones_gal')
		const actuales = document.querySelector('.btns_instalaciones_gal .actuales')
		const nuevas = document.querySelector('.btns_instalaciones_gal .nuevas')

		actuales.addEventListener('click', function (event) {

			event.preventDefault()

			instalaciones.querySelectorAll('a').forEach(function (cadaUno) {
				cadaUno.classList.remove('elegida')
			})
			actuales.classList.add('elegida')
			document.querySelectorAll('.shi_contenedor').forEach(function (cadaUno) {
				cadaUno.classList.remove('mostrar')
			})
			document.querySelectorAll('.shi_contenedor')[0].classList.add('mostrar')
			jQuery('.carousel-instalaciones').slick('unslick');
			jQuery('.carousel-instalaciones').slick({
				slidesToShow: 1,
				slidesToScroll: 1,
				infinite: true,
				speed: 300,
			});
		})
		nuevas.addEventListener('click', function (event) {
			event.preventDefault()

			instalaciones.querySelectorAll('a').forEach(function (cadaUno) {
				cadaUno.classList.remove('elegida')
			})
			nuevas.classList.add('elegida')
			document.querySelectorAll('.shi_contenedor').forEach(function (cadaUno) {
				cadaUno.classList.remove('mostrar')
			})
			document.querySelectorAll('.shi_contenedor')[1].classList.add('mostrar')

			jQuery('.carousel-instalaciones').slick('unslick');
			jQuery('.carousel-instalaciones').slick({
				slidesToShow: 1,
				slidesToScroll: 1,
				infinite: true,
				speed: 300,
			});
		})

	}

	/* Botones clientes home - slider */
	if (document.querySelectorAll('.home-clientes-nav a')[0]) {
		document.querySelectorAll('.home-clientes-nav a')[0].addEventListener('click', function (event) {
			event.preventDefault()
			document.querySelector('.slider_clientes .slick-prev').click()
		})
		document.querySelectorAll('.home-clientes-nav a')[1].addEventListener('click', function (event) {
			event.preventDefault()
			document.querySelector('.slider_clientes .slick-next').click()
		})
	}

	/* Botones resultados - slider */
	if (document.querySelectorAll('.slider_resultados-nav a')[0]) {
		document.querySelectorAll('.slider_resultados-nav a')[0].addEventListener('click', function (event) {
			event.preventDefault()
			document.querySelector('.slider_resultados .slick-prev').click()
		})
		document.querySelectorAll('.slider_resultados-nav a')[1].addEventListener('click', function (event) {
			event.preventDefault()
			document.querySelector('.slider_resultados .slick-next').click()
		})
	}
})

/* Correcciones de alto */
if (document.querySelector('.taxo .taxo-perfil-indv .-contenido')) {
	const contenidos = document.querySelectorAll('.taxo .taxo-perfil-indv .-contenido')
	let alto = 0
	contenidos.forEach(function (cadaUno) {
		if (cadaUno.offsetHeight > alto) {
			alto = cadaUno.offsetHeight
		}
	})
	contenidos.forEach(function (cadaUno) {
		cadaUno.style.height = alto + 'px'
	})

}

document.addEventListener('DOMContentLoaded', function () {
	function redimensionarYT() {
		let ancho = document.querySelector('.youtube iframe').offsetWidth
		let conversion = 1920 / ancho
		let alto_n = 1024 / conversion
		document.querySelector('.youtube iframe').style.height = alto_n + "px"
	}
	if (document.querySelector('.youtube')) {
		redimensionarYT()
		window.addEventListener('resize', function (event) {
			redimensionarYT()
		}, true);
	}

})

/* Controlar formulario de contacto */
if (document.querySelector('.btnLlamarForm')) {
	document.querySelectorAll('.btnLlamarForm').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			// overflow-hidden - para el body
			document.querySelector('.modalForm').classList.add('open')
			document.querySelector('body').classList.add('overflow-hidden')
		})
	})
}
if (document.querySelector('.modalForm_close')) {
	document.querySelector('.modalForm_close').addEventListener('click', function (event) {
		event.preventDefault()
		document.querySelector('.modalForm').classList.remove('open')
		document.querySelector('body').classList.remove('overflow-hidden')
	})
}



/* APLUS */
HTMLElement.prototype.prependHtml = function (element) {
	const div = document.createElement('div');
	div.innerHTML = element;
	this.insertBefore(div, this.firstChild);
};

HTMLElement.prototype.appendHtml = function (element) {
	const div = document.createElement('div');
	div.innerHTML = element;
	while (div.children.length > 0) {
		this.appendChild(div.children[0]);
	}
};

document.addEventListener('DOMContentLoaded', function () {

	/* Menu primer nivel */
	document.querySelectorAll('.menu-item-has-children').forEach(function (cadaEnlace) {
		const texto = cadaEnlace.querySelector('a').innerText
		cadaEnlace.querySelector('.sub-menu').prependHtml(`<span class="menu_btn_volver">‹‹ ${texto}</span>`);
	})

	document.querySelectorAll('.menu_responsive > li.menu-item-has-children > a').forEach(function (cadaLink) {

		cadaLink.addEventListener('click', function (event) {
			event.preventDefault()
			let volver_btn = `<span class="menu_btn_volver">${this.innerText}</span>`
			document.querySelectorAll('.sub-menu').forEach(function (cadaSub) {
				cadaSub.classList.remove('open')
			})
			cadaLink.parentElement.querySelector('.sub-menu').classList.add('open')
			// cadaLink.parentElement.querySelector('.sub-menu').innerHTML = volver_btn + cadaLink.parentElement.querySelector('.sub-menu').innerHTML;
		})
	})

	document.querySelectorAll('.menu_btn_volver').forEach(function (cadaBtn) {
		cadaBtn.addEventListener('click', function (event) {
			this.parentElement.parentElement.classList.remove('open')
		})
	})

	/* Menu segundo nivel */
	document.querySelectorAll('.menu_responsive > li.menu-item-has-children > .sub-menu > li.menu-item-has-children > a').forEach(function (cadaLink) {
		cadaLink.addEventListener('click', function (event) {
			event.preventDefault()
			document.querySelectorAll('.menu_responsive > li.menu-item-has-children > .sub-menu > li.menu-item-has-children .sub-menu').forEach(function (cadaSub) {
				cadaSub.classList.remove('open')
			})
			cadaLink.parentElement.querySelector('.sub-menu').classList.add('open')
		})
	})

	/* Abrir menú */
	if (document.querySelector('.btn_menu')) {
		document.querySelector('.btn_menu').addEventListener('click', function (event) {
			document.querySelector('.aplus header').classList.add('open')
		})
	}

	/* Cerrar menú */
	if (document.querySelector('.btn_menu_cerrar button')) {
		document.querySelector('.btn_menu_cerrar button').addEventListener('click', function (event) {
			document.querySelector('.aplus header').classList.remove('open')
			document.querySelectorAll('.sub-menu').forEach(function (cadaSub) {
				cadaSub.classList.remove('open')
			})
		})
	}

	document.querySelectorAll('.menu_responsive > li.menu-item-has-children > a').forEach(function (cadaLink) {

		cadaLink.addEventListener('click', function (event) {
			event.preventDefault()
			let volver_btn = `<span class="menu_btn_volver">${this.innerText}</span>`
			document.querySelectorAll('.sub-menu').forEach(function (cadaSub) {
				cadaSub.classList.remove('open')
			})
			cadaLink.parentElement.querySelector('.sub-menu').classList.add('open')
			// cadaLink.parentElement.querySelector('.sub-menu').innerHTML = volver_btn + cadaLink.parentElement.querySelector('.sub-menu').innerHTML;
		})
	})

	document.querySelectorAll('.menu_btn_volver').forEach(function (cadaBtn) {
		cadaBtn.addEventListener('click', function (event) {
			this.parentElement.parentElement.classList.remove('open')
		})
	})




})

/* Botón Redimir */
jQuery(document).ready(function ($) {
	$("#btnRedimirBeneficio").on("click", function () {
		const id_beneficio = this.getAttribute('data-beneficio')
		document.querySelector('.modalRedimido_mensaje').innerHTML = ''
		jQuery.ajax({
			type: "post",
			url: ajax_var.url,
			data: "action=" + ajax_var.action + "&nonce=" + ajax_var.nonce + "&id_beneficio=" + id_beneficio + "&accion=redimir_beneficio",
			success: function (result) {
				const salida = JSON.parse(result)
				document.querySelector('.modalRedimido_mensaje').innerHTML = `${salida.mensaje}`
				$('#modalRedimido').modal('show');
			}
		});
	});
});



function formatoFecha(fecha, formato) {
	const map = {
		dd: fecha.getDate(),
		mm: fecha.getMonth() + 1,
		yy: fecha.getFullYear().toString().slice(-2),
		yyyy: fecha.getFullYear()
	}

	return formato.replace(/dd|mm|yy|yyy/gi, matched => map[matched])
}


document.addEventListener('DOMContentLoaded', function () {

	function redimensionarYT() {
		if (document.querySelector('.wp-block-embed.is-provider-youtube')) {
			let ancho_global = document.querySelector('.wp-block-embed.is-provider-youtube').offsetWidth
			document.querySelector('.wp-block-embed.is-provider-youtube iframe').style.width = ancho_global + 'px';
			let ancho = document.querySelector('.wp-block-embed.is-provider-youtube iframe').offsetWidth
			let conversion = 1920 / ancho
			let alto_n = 1024 / conversion
			document.querySelector('.wp-block-embed.is-provider-youtube iframe').style.height = alto_n + "px"
		}
		if (document.querySelector('.videoYt')) {
			console.log("iuyhgftr")
			let ancho_global = document.querySelector('.videoYt').offsetWidth
			document.querySelector('.videoYt iframe').style.width = ancho_global + 'px';
			let ancho = document.querySelector('.videoYt iframe').offsetWidth
			let conversion = 1920 / ancho
			let alto_n = 1024 / conversion
			document.querySelector('.videoYt iframe').style.height = alto_n + "px"
		}
	}
	redimensionarYT()
	window.addEventListener('resize', function (event) {
		redimensionarYT()
	}, true);
})


/* Modal eventos */
function setEventosModal(foto, nombre, cargo, descripcion) {
	document.querySelector('.modalcard').innerHTML = ''
	const modal_card = `
		<div class="modalcard__cont">
			<div class="modalcard__perfil">
				<div class="modalcard__perfil--foto">
					<img src="${foto}" alt="">
				</div>
				<div class="modalcard__perfil--textos">
					<h2>${nombre}</h2>
					<h3>${cargo}</h3>
				</div>
			</div>
			<div class="modalcard__descripcion">
				${descripcion}
			</div>
		</div>
	`
	document.querySelector('.modalcard').innerHTML = modal_card
}

/* Modal Aliados */
function setAliadosModal(foto, contenido, descripcion) {
	document.querySelector('.modalcard').innerHTML = ''
	const modal_card = `
		<div class="modalcard__cont">
			<div class="modalcard__perfil">
				<div class="modalcard__perfil--foto">
					<img src="${foto}" alt="" class="no-filter">
				</div>
				<div class="modalcard__perfil--textos">
					<h2>${descripcion}</h2>
				</div>
			</div>
			<div class="modalcard__descripcion">
				${contenido}
			</div>
		</div>
	`
	document.querySelector('.modalcard').innerHTML = modal_card
}

/* La modal de Bolsa de empleo */
function modal_ofertas(){

	document.querySelectorAll('.modalOfertaAct').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			const objeto = this.parentElement.parentElement.parentElement
			console.log(objeto)
			const titulo = objeto.querySelector('.titulo').innerText
			const descripcion = objeto.querySelector('.descripcion').innerText
			let finalizacion = this.getAttribute('data-finalizacion')
			let detalles = this.getAttribute('data-detalles')
			let autor = this.getAttribute('data-autor')
			let contacto = this.getAttribute('data-contacto')

			if (finalizacion == "") {
				finalizacion = '';
			} else {
				finalizacion = `
					<div class="campoIndv">
						<strong>Fecha finalización</strong>
						<span>${finalizacion}</span>
					</div>
				`;
			}

			if (autor == "") {
				autor = '';
			} else {
				autor = `
					<div class="campoIndv">
						<strong>Publicado por:</strong>
						<span>${autor}</span>
					</div>
				`;
			}

			if (detalles == "") {
				detalles = '';
			} else {
				detalles = `
					<div class="campoIndv full_width">
						<strong>Más detalles</strong>
						<div>${detalles}</div>
					</div>
				`;
			}

			if (contacto == "") {
				contacto = '';
			} else {
				contacto = `
					<div class="campoIndv full_width">
						<strong>Datos de contacto</strong>
						<span>${contacto}</span>
					</div>
				`;
			}

			const salida = `
				<div class="ofertaIndv__cont">
					<h3>${titulo}</h3>
					<p>${descripcion}</p>
					<div class="ofertaIndv__cont--campos">
						${finalizacion}
						${autor}
						${detalles}
						${contacto}
					</div>
				</div>
			`;
			document.querySelector('.ofertaIndv').innerHTML = salida
			setAliadosModal(foto, contenido, descripcion)
		})
	})
}

document.addEventListener('DOMContentLoaded', function () {

	/* La modal de Equipo */
	document.querySelectorAll('.modalEquipoAct').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			const foto = this.parentElement.parentElement.querySelector('img').getAttribute('src')
			const nombre = this.parentElement.parentElement.querySelector('.equipolist__card--content__cont h2').innerText
			const cargo = this.parentElement.parentElement.querySelector('.equipolist__card--content__cont h3').innerText
			const descripcion = this.getAttribute('data-descripcion')
			setEventosModal(foto, nombre, cargo, descripcion)
		})
	})
	document.querySelectorAll('.modalEquipoAct2').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			const foto = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('img').getAttribute('src')
			const nombre = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('.equipolist__card--content__cont h2').innerText
			const cargo = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('.equipolist__card--content__cont h3').innerText
			const descripcion = this.getAttribute('data-descripcion')
			setEventosModal(foto, nombre, cargo, descripcion)
		})
	})

	/* La modal de aliado */
	document.querySelectorAll('.modalAliadoAct').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			const foto = this.parentElement.parentElement.querySelector('img').getAttribute('src')
			const contenido = this.getAttribute('data-contenido')
			const descripcion = this.getAttribute('data-descripcion')
			setAliadosModal(foto, contenido, descripcion)
		})
	})

	document.querySelectorAll('.modalAliadoAct2').forEach(function (cadaUno) {
		cadaUno.addEventListener('click', function (event) {
			event.preventDefault()
			const foto = this.parentElement.parentElement.parentElement.parentElement.parentElement.querySelector('img').getAttribute('src')
			const contenido = this.getAttribute('data-contenido')
			const descripcion = this.getAttribute('data-descripcion')
			setAliadosModal(foto, contenido, descripcion)
		})
	})

	/* La modal de Bolsa de empleo */
	modal_ofertas()


})

document.addEventListener('DOMContentLoaded', function(){

	function enviarFiltros(tipo){
		
		const objeto = new FormData()
		const filtro_tipo = document.querySelector('.filtro_tipo').value
		objeto.append('action', ajax_var.action);
		objeto.append('nonce', ajax_var.nonce);
		objeto.append('filtro_tipo', filtro_tipo);

		if(tipo == 'filtros'){
			objeto.append('accion', 'filtro');
			document.querySelector('.filtro_buscador').reset()
			document.querySelectorAll('.filtro_valores').forEach(function( cadaFiltro ){
				if(cadaFiltro.value != ""){
					objeto.append(cadaFiltro.getAttribute('name'), cadaFiltro.value);
				}
			})
		}

		if(tipo == 'buscador'){
			objeto.append('accion', 'buscador');
			if(document.querySelector('.filtro_buscador .buscador').value != ""){
				const buscador_text = document.querySelector('.filtro_buscador .buscador').value
				objeto.append('buscar', buscador_text);
			}
		}

		// Cargando
		let contenedor = ''
		if(filtro_tipo == 'directorio'){
			contenedor = '.directoriolist'
		}
		if(filtro_tipo == "empleo"){
			contenedor = '.ofertalist'
		}
		if(filtro_tipo == "ofertas"){
			contenedor = '.ofertalist'
		}
		document.querySelector(contenedor).innerHTML = `
			<div class="cargando">
				<div class="spinner"></div>
				<p>Cargando resultados, por favor espere...</p>
			</div>
		`;
		if(document.querySelector('.paginador')){
			document.querySelector('.paginador').innerHTML = ''
		}

		// Envío de consulta
		fetch(ajax_var.url, {
			method: "POST",
			headers: {
				"Accept": "*/*",
			},
			body: objeto
		})
		.then(resp => resp.json())
		.then(salida => {
			// código adicional
			// console.log(salida) // testing // johnjohnjohn
			document.querySelector(contenedor).innerHTML = salida.html
			modal_ofertas()
			// document.querySelector('.blog_post_html').innerHTML = salida.html
		});

	}

	document.querySelectorAll('.filtro__accion').forEach(function(ca){
		const input = ca.querySelector('.filtro_valores')
		ca.querySelectorAll('a').forEach(function(cb){
			cb.addEventListener('click', function( event ){
				event.preventDefault()
				const filtro_id = this.getAttribute('filtro-id')
				if(filtro_id != null){
					input.value = filtro_id
					enviarFiltros('filtros')
				}
			})
		})
	})




})


